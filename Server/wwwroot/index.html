<!DOCTYPE html>
<html>
<head>
    <title>Little Buddy Dashboard</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="chart-container">
        <div class="chart">
            <canvas id="chart1"></canvas>
        </div>
        <div class="chart">
            <canvas id="chart2"></canvas>
        </div>
        <div class="chart">
            <canvas id="chart3"></canvas>
        </div>
    </div>
    <div id="messages"></div>

    <!-- Include SignalR client library -->
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@latest/dist/browser/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/hubs/payload/")
            .build();

        console.log("Connected!");

        connection.on("ReceivePayload", (payload) => {
            const messagesDiv = document.getElementById("messages");
            const messageElement = document.createElement("div");
            messageElement.textContent = `${payload}`;
            messagesDiv.appendChild(messageElement);
        });

        connection.start().catch(err => console.error(err.toString()));
    </script>

    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Data and options for the charts
        const data = {
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                borderWidth: 1
            }]
        };

        const options = {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        };

        // Initialize the charts
        const chartIds = ['chart1', 'chart2', 'chart3'];

    
            const ctx = document.getElementById("chart1").getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: data,
                options: options
            });
        
    </script>
</body>
</html>

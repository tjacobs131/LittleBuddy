<!DOCTYPE html>
<html>
<head>
    <title>MQTT SignalR Client</title>
</head>
<body>
    <div id="messages"></div>

    <!-- Include SignalR client library -->
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@latest/dist/browser/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/BuddyHub")
            .build();

        connection.on("ReceiveMqttMessage", (topic, payload) => {
            const messagesDiv = document.getElementById("messages");
            const messageElement = document.createElement("div");
            messageElement.textContent = `Topic: ${topic}, Payload: ${payload}`;
            messagesDiv.appendChild(messageElement);
        });

        connection.start().catch(err => console.error(err.toString()));
    </script>
</body>
</html>
